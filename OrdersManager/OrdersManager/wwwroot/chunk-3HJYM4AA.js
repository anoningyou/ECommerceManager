import{a as B}from"./chunk-QNZQRHFQ.js";import{a as y,c as h}from"./chunk-N2QAKZXN.js";import"./chunk-YBUQXEXK.js";import{f as v}from"./chunk-O3SJPPXD.js";import{A as N,B as R,a as M,f as p,i as S,j as w,m as u,o as D,p as F,q as G,s as x,t as A,u as L,v as k,w as O,x as E,z as I}from"./chunk-QDSZNKKS.js";import{aa as P,ca as T}from"./chunk-BEGFXWGT.js";import{Cb as i,Db as a,Eb as b,H as f,Lb as s,Xb as m,_a as r,cc as _,ea as e,ia as g,tb as n,za as C}from"./chunk-FVSJTNRY.js";var V=class c{_formBuilder=e(x);_accountService=e(h);_destroyRef=e(C);_router=e(v);_toastr=e(y);formGroup=this._formBuilder.group({login:new u(null,[p.required]),password:new u(null,[p.required,p.pattern(/^(?=[^A-Za-z]*[A-Za-z])(?=\D*\d).{2,}$/)])});additionalErrorPasswordFunctions=[{key:"pattern",value:(l,t)=>`${t??"Field"} must contain at least 1 letter and 1 digit`}];ngOnInit(){this._accountService.currentUser()&&this._router.navigate(["/"])}onSubmit(){if(!this.formGroup.valid){this.formGroup.markAllAsTouched();return}let l={userName:this.formGroup.controls.login.value,password:this.formGroup.controls.password.value};this._accountService.login(l).pipe(f(1),M(this._destroyRef)).subscribe({next:t=>{this._router.navigate(["/"])},error:t=>{Array.isArray(t)&&t.forEach(o=>{this._toastr.error(o)})}})}onCancel(){this._router.navigate(["/"])}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=g({type:c,selectors:[["app-login"]],standalone:!0,features:[_],decls:14,vars:10,consts:[["appearance","outlined",1,"container"],[1,"input-form",3,"ngSubmit","formGroup"],[3,"formControl","label","placeholder"],[3,"formControl","label","type","additionalErrorTextFunctions","placeholder"],[1,"buttons"],["mat-button","",1,"button",3,"click","disabled"],["mat-button","",1,"button",3,"click"]],template:function(t,o){t&1&&(i(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),m(3,"Login"),a()(),i(4,"mat-card-content")(5,"form",1),s("ngSubmit",function(){return o.onSubmit()}),b(6,"app-input-text",2)(7,"app-input-text",3),a()(),i(8,"mat-card-actions")(9,"div",4)(10,"button",5),s("click",function(){return o.onSubmit()}),m(11," Login "),a(),i(12,"button",6),s("click",function(){return o.onCancel()}),m(13," Cancel "),a()()()()),t&2&&(r(5),n("formGroup",o.formGroup),r(),n("formControl",o.formGroup.controls.login)("label","Login")("placeholder","Input your login"),r(),n("formControl",o.formGroup.controls.password)("label","Password")("type","password")("additionalErrorTextFunctions",o.additionalErrorPasswordFunctions)("placeholder","Input your password"),r(3),n("disabled",!o.formGroup.valid))},dependencies:[R,k,I,E,N,O,T,P,A,D,S,w,L,F,G,B],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.input-form[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;flex-direction:column;gap:8px}.input-form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;justify-content:space-between;gap:8px}.buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{max-width:50%}"],changeDetection:0})};export{V as LoginComponent};
