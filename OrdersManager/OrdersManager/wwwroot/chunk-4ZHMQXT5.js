import{a as q}from"./chunk-QNZQRHFQ.js";import{a as _,c as w}from"./chunk-N2QAKZXN.js";import"./chunk-YBUQXEXK.js";import{f as h}from"./chunk-O3SJPPXD.js";import{A as B,B as I,a as M,f as l,i as S,j as F,m,o as R,p as A,q as G,s as P,t as x,u as D,v as k,w as E,x as O,z as N}from"./chunk-QDSZNKKS.js";import{aa as T,ca as V}from"./chunk-BEGFXWGT.js";import{Cb as a,Db as s,Eb as v,H as g,Lb as u,Xb as p,_a as n,cc as y,ea as o,ia as b,tb as i,za as C}from"./chunk-FVSJTNRY.js";var c=class{static matchValues(r,e="matchValues"){return t=>t.value===t.parent?.get(r)?.value?null:{[e]:!0}}};var $=class d{_formBuilder=o(P);_accountService=o(w);_destroyRef=o(C);_router=o(h);_toastr=o(_);formGroup=this._formBuilder.group({login:new m(null,[l.required]),password:new m(null,[l.required,l.pattern(/^(?=[^A-Za-z]*[A-Za-z])(?=\D*\d).{2,}$/)]),confirmPassword:new m(null,[l.required,c.matchValues("password")])});additionalErrorPasswordFunctions=[{key:"pattern",value:(r,e)=>`${e??"Field"} must contain at least 1 letter and 1 digit`},{key:"matchValues",value:(r,e)=>`${e??"Field"} must be the same as password`}];ngOnInit(){this._accountService.currentUser()&&this._router.navigate(["/"]),this.formGroup.controls.password.valueChanges.subscribe({next:()=>this.formGroup.controls.confirmPassword.updateValueAndValidity()})}onSubmit(){if(!this.formGroup.valid){this.formGroup.markAllAsTouched();return}let r={userName:this.formGroup.controls.login.value,password:this.formGroup.controls.password.value};this._accountService.register(r).pipe(g(1),M(this._destroyRef)).subscribe({next:e=>{this._router.navigate(["/"])},error:e=>{Array.isArray(e)&&e.forEach(t=>{this._toastr.error(t)})}})}onCancel(){this._router.navigate(["/"])}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=b({type:d,selectors:[["app-register"]],standalone:!0,features:[y],decls:15,vars:15,consts:[["appearance","outlined",1,"container"],[1,"input-form",3,"ngSubmit","formGroup"],[3,"formControl","label","placeholder"],[3,"formControl","label","type","additionalErrorTextFunctions","placeholder"],[1,"buttons"],["mat-button","",1,"button",3,"click","disabled"],["mat-button","",1,"button",3,"click"]],template:function(e,t){e&1&&(a(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),p(3,"Register"),s()(),a(4,"mat-card-content")(5,"form",1),u("ngSubmit",function(){return t.onSubmit()}),v(6,"app-input-text",2)(7,"app-input-text",3)(8,"app-input-text",3),s()(),a(9,"mat-card-actions")(10,"div",4)(11,"button",5),u("click",function(){return t.onSubmit()}),p(12," Register "),s(),a(13,"button",6),u("click",function(){return t.onCancel()}),p(14," Cancel "),s()()()()),e&2&&(n(5),i("formGroup",t.formGroup),n(),i("formControl",t.formGroup.controls.login)("label","Login")("placeholder","Input your login"),n(),i("formControl",t.formGroup.controls.password)("label","Password")("type","password")("additionalErrorTextFunctions",t.additionalErrorPasswordFunctions)("placeholder","Input your password"),n(),i("formControl",t.formGroup.controls.confirmPassword)("label","Confirm password")("type","password")("additionalErrorTextFunctions",t.additionalErrorPasswordFunctions)("placeholder","Repeat your password"),n(3),i("disabled",!t.formGroup.valid))},dependencies:[I,k,N,O,B,E,V,T,x,R,S,F,D,A,G,q],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.input-form[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;flex-direction:column;gap:8px}.input-form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;justify-content:space-between;gap:8px}.buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{max-width:50%}"],changeDetection:0})};export{$ as RegisterComponent};
